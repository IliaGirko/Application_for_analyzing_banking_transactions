# Application_for_analyzing_banking_transactions

## Описание проекта:
Это банковское приложение, которое:
+ Приветствует пользователя в зависимости от времени суток;
+ Предоставляет информацию по каждой карте и предоставляет данные:
    последние 4 цифры карты, общая сумма расходов, кешбэк (1 рубль на каждые 100 рублей).;
+ Выводит данные по топ-5 транзакций по сумме платежа;
+ Предоставляем информацию о курсе валют евро и доллар;
+ Предоставляет информацию о стоимость акций из S&P 500(файл пользовательских настроек для изменения 
списка предоставляемой информации `user_settings.json`);
+ Выполняет простой поиск по слову в категории и описании транзакций;
+ Формирует отчет "траты по категориям" по заданной пользователем категории, в период за 3 месяца от указанной
пользователем даты. Если дата отсутствует, то берется текущая дата

## Использование
Для запуска приложения необходимо:
1. Клонируйте репозиторий:

```
git clone https://github.com/IliaGirko/Application_for_analyzing_banking_transactions.git
```
2. Установите виртуальное окружение:
```
poetry install
```
3. Дополните файл `.env.example` необходимыми данными и переименуйте в `.env`

4. Приложение можно использовать из файла *main.py*

## Пример работы:
### Запускается страница банковского приложения 'Веб-страницы' - страница 'Главная':
```
'Веб-страницы' - страница 'Главная':
```
### Программа выводит json-ответ с данными в следующем формате:
```
{
    "greeting": "Добрый день",
    "cards": [
        {
            "last_digits": "1112",
            "total_spent": -46207.08,
            "cashback": -462.07
        },
        {
            "last_digits": "4556",
            "total_spent": 545261.72,
            "cashback": 5452.62
        }
        ...
    ],
    "top_transactions": [
        {
            "date": "30.12.2021",
            "amount": 174000.0,
            "category": "Пополнения",
            "description": "Пополнение через Газпромбанк"
        },
        {
            "date": "30.07.2018",
            "amount": 150000.0,
            "category": "Пополнения",
            "description": "Пополнение. Перевод средств с торгового счета"
        }
        ...
    ],
    "currency_rates": [
        {
            "currency": "USD",
            "rate": 92.76
        },
        {
            "currency": "EUR",
            "rate": 103.51
        }
    ],
    "stock_prices": [
        {
            "stock": "AAPL",
            "price": null
        },
        {
            "stock": "AMZN",
            "price": null
        }
        ...
    ]
}
```
,где:
1. `"greeting":` программа приветствует пользователя(в зависимости от времени суток-
по разному);
2. `"cards":` предоставляет информацию о всех картах и остаток на данный момент;
3. `"top_transactions":` выводит топ-5 операций по сумме;
4. `"currency_rates":` выводит курс валют;
5. `"stock_prices":` выводит курс акций.

### Запускается страница банковского приложения 'Сервисы' - Простой поиск:
```
Страница 'Сервисы' - Простой поиск:
```
1. Программа предлагает ввести слово для поиска операции 
по всем картам и за все время:
```
Введите слово для поиска: #Duty(пример)
```
В случае если операции в категории, введенной пользователем,
за данный период были то, выводится информация следующего седержания:
```
[
{
'Дата операции': '09.07.2018 18:29:03', 
'Дата платежа': '11.07.2018', 
'Номер карты': '*7197', 
'Статус': 'OK', 
'Сумма операции': -60.0, 
'Валюта операции': 'RUB', 
'Сумма платежа': -60.0, 
'Валюта платежа': 'RUB', 
'Кэшбэк': None, 
'Категория': 'Duty Free', 
'MCC': 5309.0, 
'Описание': 'Regstaer-M Dtp', 
'Бонусы (включая кэшбэк)': 1, 
'Округление на инвесткопилку': 0, 
'Сумма операции с округлением': 60.0
}...
]
```
В случае если не было, то программа возвращает ответ в таком формате:
```
По заданному слову Рога И Копыта не найдено операций
```
### Запускается страница банковского приложения 'Отчеты' - Траты по категории:
```
Страница 'Отчеты' - Траты по категории: 
```
1. Предлагается выбрать категорию для сортировки:
```
Введите категорию для сортировки: #Супермаркеты(пример)
```
2. А так же указать дату для финиша фильтрации, старт 
исчисляется тремя месяцами ранее введенной пользователем даты:
```
Введите дату в формате ДД.ММ.ГГГГ: #20.01.2020(пример)
```
В случае если операции в категории, введенной пользователем,
за данный период были то, выводится информация следующего седержания:
```
[
{
        "Дата операции":"19.01.2020 22:30:32",
        "Сумма операции":-53.9,
        "Категория":"Супермаркеты"
    },
    {
        "Дата операции":"19.01.2020 20:57:51",
        "Сумма операции":-139.8,
        "Категория":"Супермаркеты"
    }...
]
```
В случае если не было, то программа возвращает ответ в таком формате:
```
по заданным параметрам на дату 10.01.2020 в категории Одежда и обувь нет информации
```
и в том и в другом случае, данные о фильтрации будут выведены в файл `mylog.txt`

## Логирование
+ Программа написана с использованием логирования информационных сообщений,
а также сообщений об ошибках. Логи записываются в файл `main.log`

## Code coverage
Code coverage достигает 90%

## Лицензии
Проект распространяеется под [лицензией MIT](https://github.com/git/git-scm.com/blob/main/MIT-LICENSE.txt)
